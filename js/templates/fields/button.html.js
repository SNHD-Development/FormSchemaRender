define(function() { var str ='<%var _hide = (options.visibleon) ? \' style="display:none"\': \'\';var _description = description;var _id = (typeof attributes.id !== \'undefined\') ? attributes.id: name;var customHtml = (typeof _customHtml === \'undefined\') ? null: _customHtml;switch (_lang) {case \'sp\':if (typeof _submit !== \'undefined\') {_description = \'Enviar\';}break;}%><% if (typeof _submit === \'undefined\' && typeof url !== \'undefined\') { %><a id="<%= _id %>" href="<%= url %>" <%= _attr %><%= _hide %>><%= _description %></a><% } else {var _btnType = (typeof _submit === \'undefined\') ? \'button\' : \'submit\';%><button type="<%= _btnType %>" id="<%= _id %>"<%= _attr %><%= _hide %>><%= _description %></button><% } %><% if (typeof options !== \'undefined\' && options) {if (options[\'data-remodal-target\']) { %><div class="remodal remodal-unacceptable-modal" data-remodal-id="<%= options[\'data-remodal-target\'] %>"><button data-remodal-action="close" class="remodal-close all-btns"></button><h1>What is the unacceptable reason?</h1><br><p class="custom-html"><%= customHtml %></p><br><div class="all-btns"><button data-remodal-action="cancel" class="remodal-cancel">Cancel</button><button data-remodal-action="confirm" class="remodal-confirm">OK</button></div><div class="hide spinner text-success"><i class="icon-spinner icon-spin icon-large"></i> Submitting your request...</div><div class="hide text-success send-successfully"><i class="icon-ok icon-large"></i> Request updated!</div><div class="hide text-error"><p><i class="icon-exclamation icon-large"></i> Could not be able to submit your request!</p><p><i class="icon-spinner icon-spin icon-large"></i> Reloading this request...</p></div></div><script type="text/javascript">(function() {var currentRemodal;var submitting = false;var _markAsUnacceptableUrl = \'<%= options[\'data-url-mark-as-unacceptable\'] %>\';jQuery(document).on(\'click\',\'#<%= _id %>\', function(e) {e.preventDefault();e.stopPropagation();if (!currentRemodal) {var tmp = jQuery(\'[data-remodal-id="<%= options[\'data-remodal-target\'] %>"]\');currentRemodal = tmp.remodal({hashTracking: false,closeOnConfirm: false,closeOnOutsideClick: false});var $r = tmp.find(\'#UnacceptableReason\');if ($r.is(\':radio\') || $r.is(\':checkbox\')) {} else {$r.val(\'<%= options[\'data-remodal-current-value\'] %>\');}}currentRemodal.open();return false;}).on(\'opened\', \'[data-remodal-id="<%= options[\'data-remodal-target\'] %>"]\', function() {$(\':input\', this).not(\':button\').not(\':radio\').not(\':checkbox\').first().focus();}).on(\'confirmation\', \'[data-remodal-id="<%= options[\'data-remodal-target\'] %>"]\', function(e) {if (submitting) {return;}submitting = true;/* Hide all close */var $this = $(this);var showError = function() {if (console && console.error) {console.error(arguments);}$this.find(\'.text-success\').fadeOut(\'slow\');$this.find(\'.text-error\').fadeIn(\'slow\', function() {setTimeout(function() {location.reload(true);}, 1000);});};var summission = function () {var $val = $this.find(\'#UnacceptableReason\');var _val = $val.val();var endPoint = _.extend({}, {PUT_FORM: \'/FormActions/putform\'});_.each(endPoint, function(v, k) {endPoint[k] = v + \'?id=<%= options[\'data-current-form-id\'] %>\';});var data = {UnacceptableReason : _val};$.ajax({url: endPoint.PUT_FORM,type: \'PUT\',data: data,cache: false,success: function(data, textStatus, jqXHR) {$this.find(\'.spinner.text-success\').fadeOut(\'slow\', function() {$this.find(\'.send-successfully\').fadeIn(\'slow\', function() {setTimeout(function() {(_markAsUnacceptableUrl) ? location.replace(_markAsUnacceptableUrl): location.reload(true);}, 1000);});});},error: showError});};$this.find(\'.all-btns\').fadeOut(\'slow\');$this.find(\'.spinner.text-success\').fadeIn(\'slow\', summission);});})();</script><%}}%>';return str;});