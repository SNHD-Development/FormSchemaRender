define(["jquery","lodash","backbone","vm","utils","events","modelbinder","validation","views/baseField","text!templates/form-layouts/horizontal.html"],function(o,e,t,i,n,l,s,a,r,p){return r.extend({_modelBinder:void 0,template:e.template(p),initialize:function(){if(r.prototype.initialize.call(this),this._divcontrolgroup=0,void 0===this.options.formSchema)throw"formSchema is not in the options parameters";this.el="#"+this.options.formSchema.name,o(this.el).addClass("form-horizontal")},render:function(){var i,l=this,s=r.prototype.render,a="",p=[],d={};e.each(this.options.formSchema.fields,function(t,c,m){var h="",u=!1,v=t.type.toLowerCase();if(!n.shouldRenderShowOnUser(t))return"";if(!r.prototype.checkShowOnMode.call(l,t,l.options.mode,l.options.formData.status))return"";if(l.options.internal&&void 0!==t.options.internalcanupdate&&!t.options.internalcanupdate?"image"===v&&(u=!0):void 0!==t.description&&(-1===e.indexOf(l.notRenderLabel,v)||"html"===v&&t.options.visibleon)?u=!0:t.options.visibleon&&"checkbox"===v&&(u=!0),u){var f="",b="";t.options.visibleon&&(f=" options-visible-on-"+t.name,b=' style="display:none"'),h+='<div class="control-group'+f+'"'+b+">",this._divcontrolgroup++,"html"!==v&&(i=n.checkRequireFields(t,l.options.formSchema.validation),h+=l.renderLabel(t,i,"control-label"),h+='<div class="controls">')}h+=s.call(l,t),u&&(h+="</div>","html"!==v&&(h+="</div>"),this._divcontrolgroup--),"create"===l.options.mode&&t.options.copyvaluesfrom&&"list"!==v&&(a+=r.prototype.setupCopyValuesFrom.call(l,t)),t.options.visibleon&&"button"!==v&&"submit"!==v?("checkbox"===v&&(h=h.replace(/<label>(\s*)\w+(\s*)<\/label>/i,"")),p.unshift({value:t,html:h})):a+=h,t&&t.name&&t.type&&(d[t.name]=o.trim(t.type.toLowerCase()))}),e.each(p,function(o){r.prototype.setupVisibleOn.call(l,o.value,o.html,".control-group",d)}),a+=r.prototype.closeOpenDiv.call(this),o(this.el).html(this.template(e.extend({html:a},this.options.formSchema))),l._modelBinder.bind(l.model,l.el,l.model.bindings),t.Validation.bind(l,{forceUpdate:!0})}})});