define(["jquery","lodash","backbone","vm","utils","events","modelbinder","validation","views/baseField","text!templates/form-layouts/horizontal.html"],function(e,o,t,i,n,l,s,a,r,p){var d=r.extend({_modelBinder:void 0,template:o.template(p),initialize:function(){if(r.prototype.initialize.call(this),this._divcontrolgroup=0,"undefined"==typeof this.options.formSchema)throw"formSchema is not in the options parameters";this.el="#"+this.options.formSchema.name,e(this.el).addClass("form-horizontal")},render:function(){var i,l=this,s=r.prototype.render,a="",p=[],d={};o.each(this.options.formSchema.fields,function(t,c,m){var h="",u=!1,f=t.type.toLowerCase();if(!r.prototype.checkShowOnMode.call(l,t,l.options.mode,l.options.formData.status))return"";if(l.options.internal&&"undefined"!=typeof t.options.internalcanupdate&&!t.options.internalcanupdate?"image"===f&&(u=!0):"undefined"!=typeof t.description&&(o.indexOf(l.notRenderLabel,f)===-1||"html"===f&&t.options.visibleon)?u=!0:t.options.visibleon&&"checkbox"===f&&(u=!0),u){var v="",b="";t.options.visibleon&&(v=" options-visible-on-"+t.name,b=' style="display:none"'),h+='<div class="control-group'+v+'"'+b+">",this._divcontrolgroup++,"html"!==f&&(i=n.checkRequireFields(t,l.options.formSchema.validation),h+=l.renderLabel(t,i,"control-label"),h+='<div class="controls">')}h+=s.call(l,t),u&&(h+="</div>","html"!==f&&(h+="</div>"),this._divcontrolgroup--),"create"===l.options.mode&&t.options.copyvaluesfrom&&"list"!==f&&(a+=r.prototype.setupCopyValuesFrom.call(l,t)),t.options.visibleon&&"button"!==f&&"submit"!==f?("checkbox"===f&&(h=h.replace(/<label>(\s*)\w+(\s*)<\/label>/i,"")),p.unshift({value:t,html:h})):a+=h,t&&t.name&&t.type&&(d[t.name]=e.trim(t.type.toLowerCase()))}),o.each(p,function(e){r.prototype.setupVisibleOn.call(l,e.value,e.html,".control-group",d)}),a+=r.prototype.closeOpenDiv.call(this),e(this.el).html(this.template(o.extend({html:a},this.options.formSchema))),l._modelBinder.bind(l.model,l.el,l.model.bindings),t.Validation.bind(l,{forceUpdate:!0})}});return d});