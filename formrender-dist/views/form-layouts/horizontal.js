define(["jquery","lodash","backbone","vm","utils","events","modelbinder","validation","views/baseField","text!templates/form-layouts/horizontal.html"],function(o,e,t,i,n,l,s,a,r,p){var d=r.extend({_modelBinder:void 0,template:e.template(p),initialize:function(){if(r.prototype.initialize.call(this),this._divcontrolgroup=0,"undefined"==typeof this.options.formSchema)throw"formSchema is not in the options parameters";this.el="#"+this.options.formSchema.name,o(this.el).addClass("form-horizontal")},render:function(){var i,l=this,s=r.prototype.render,a="",p=[];e.each(this.options.formSchema.fields,function(o,t,d){var c="",m=!1,h=o.type.toLowerCase();if(!r.prototype.checkShowOnMode.call(l,o,l.options.mode,l.options.formData.status))return"";if(l.options.internal&&"undefined"!=typeof o.options.internalcanupdate&&!o.options.internalcanupdate?"image"===h&&(m=!0):"undefined"!=typeof o.description&&(e.indexOf(l.notRenderLabel,h)===-1||"html"===h&&o.options.visibleon)?m=!0:o.options.visibleon&&"checkbox"===h&&(m=!0),m){var u="",f="";o.options.visibleon&&(u=" options-visible-on-"+o.name,f=' style="display:none"'),c+='<div class="control-group'+u+'"'+f+">",this._divcontrolgroup++,"html"!==h&&(i=n.checkRequireFields(o,l.options.formSchema.validation),c+=l.renderLabel(o,i,"control-label"),c+='<div class="controls">')}c+=s.call(l,o),m&&(c+="</div>","html"!==h&&(c+="</div>"),this._divcontrolgroup--),"create"===l.options.mode&&o.options.copyvaluesfrom&&"list"!==h&&(a+=r.prototype.setupCopyValuesFrom.call(l,o)),o.options.visibleon&&"button"!==h&&"submit"!==h?("checkbox"===h&&(c=c.replace(/<label>(\s*)\w+(\s*)<\/label>/i,"")),p.unshift({value:o,html:c})):a+=c}),e.each(p,function(o){r.prototype.setupVisibleOn.call(l,o.value,o.html,".control-group")}),a+=r.prototype.closeOpenDiv.call(this),o(this.el).html(this.template(e.extend({html:a},this.options.formSchema))),l._modelBinder.bind(l.model,l.el,l.model.bindings),t.Validation.bind(l,{forceUpdate:!0})}});return d});