define(["jquery","lodash","backbone","vm","utils","events","modelbinder","validation","views/baseField","text!templates/form-layouts/horizontal.html"],function(e,t,n,r,i,s,o,u,a,f){var l=a.extend({_modelBinder:undefined,template:t.template(f),initialize:function(){a.prototype.initialize.call(this),this._divcontrolgroup=0;if(typeof this.options.formSchema=="undefined")throw"formSchema is not in the options parameters";this.el="#"+this.options.formSchema.name,e(this.el).addClass("form-horizontal")},render:function(){var r=this,s=a.prototype.render,o="",u,f=[];t.each(this.options.formSchema.fields,function(e,n,l){var c="",h=!1,p=e.type.toLowerCase();if(!a.prototype.checkShowOnMode.call(r,e,r.options.mode,r.options.formData.status))return"";r.options.internal&&typeof e.options.internalcanupdate!="undefined"&&!e.options.internalcanupdate?p==="image"&&(h=!0):typeof e.description!="undefined"&&(t.indexOf(r.notRenderLabel,p)===-1||p==="html"&&e.options.visibleon)?h=!0:e.options.visibleon&&p==="checkbox"&&(h=!0);if(h){var d="",v="";e.options.visibleon&&(d=" options-visible-on-"+e.name,v=' style="display:none"'),c+='<div class="control-group'+d+'"'+v+">",this._divcontrolgroup++,p!=="html"&&(u=i.checkRequireFields(e,r.options.formSchema.validation),c+=r.renderLabel(e,u,"control-label"),c+='<div class="controls">')}c+=s.call(r,e),h&&(c+="</div>",p!=="html"&&(c+="</div>"),this._divcontrolgroup--),r.options.mode==="create"&&e.options.copyvaluesfrom&&(o+=a.prototype.setupCopyValuesFrom.call(r,e)),e.options.visibleon&&p!=="button"&&p!=="submit"?(p==="checkbox"&&(c=c.replace(/<label>(\s*)\w+(\s*)<\/label>/i,"")),f.unshift({value:e,html:c})):o+=c}),t.each(f,function(e){a.prototype.setupVisibleOn.call(r,e.value,e.html,".control-group")}),o+=a.prototype.closeOpenDiv.call(this),e(this.el).html(this.template(t.extend({html:o},this.options.formSchema))),r._modelBinder.bind(r.model,r.el,r.model.bindings),n.Validation.bind(r,{forceUpdate:!0})}});return l});