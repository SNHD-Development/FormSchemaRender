define(["jquery","lodash","backbone","vm","utils","events","modelbinder","validation","views/baseField","text!templates/form-layouts/default.html"],function(e,t,o,i,n,a,l,s,r,d){var p=r.extend({_modelBinder:void 0,template:t.template(d),initialize:function(){if(r.prototype.initialize.call(this),"undefined"==typeof this.options.formSchema)throw"formSchema is not in the options parameters";this.el="#"+this.options.formSchema.name},render:function(){var i,a=this,l=r.prototype.render,s="",d=[];t.each(this.options.formSchema.fields,function(e,o,p){var m="",c=e.type.toLowerCase();return r.prototype.checkShowOnMode.call(a,e,a.options.mode,a.options.formData.status)?(a.options.internal&&"undefined"!=typeof e.options.internalcanupdate&&!e.options.internalcanupdate?"image"===c&&(i=n.checkRequireFields(e,a.options.formSchema.validation),m+=a.renderLabel(e,i)):"undefined"!=typeof e.description&&t.indexOf(a.notRenderLabel,c)===-1&&(i=n.checkRequireFields(e,a.options.formSchema.validation),m+=a.renderLabel(e,i)),m+=l.call(a,e),"create"===a.options.mode&&e.options.copyvaluesfrom&&"list"!==c&&(s+=r.prototype.setupCopyValuesFrom.call(a,e)),void(e.options.visibleon&&"button"!==c&&"submit"!==c?(m='<div class="options-visible-on-'+e.name+'" style="display:none">'+m+"</div>",d.unshift({value:e,html:m})):s+=m)):""}),t.each(d,function(e){r.prototype.setupVisibleOn.call(a,e.value,e.html)}),s+=r.prototype.closeOpenDiv.call(this),e(this.el).html(this.template(t.extend({html:s},this.options.formSchema))),a._modelBinder.bind(a.model,a.el,a.model.bindings),o.Validation.bind(a,{forceUpdate:!0})}});return p});