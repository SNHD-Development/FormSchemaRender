define(["jquery","lodash","backbone","vm","utils","events","modelbinder","validation","views/baseField","text!templates/form-layouts/default.html"],function(e,t,o,i,n,a,l,s,r,p){var d=r.extend({_modelBinder:void 0,template:t.template(p),initialize:function(){if(r.prototype.initialize.call(this),"undefined"==typeof this.options.formSchema)throw"formSchema is not in the options parameters";this.el="#"+this.options.formSchema.name},render:function(){var i,a=this,l=r.prototype.render,s="",p=[],d={};t.each(this.options.formSchema.fields,function(o,m,c){var h="",u=o.type.toLowerCase();return r.prototype.checkShowOnMode.call(a,o,a.options.mode,a.options.formData.status)?(a.options.internal&&"undefined"!=typeof o.options.internalcanupdate&&!o.options.internalcanupdate?"image"===u&&(i=n.checkRequireFields(o,a.options.formSchema.validation),h+=a.renderLabel(o,i)):"undefined"!=typeof o.description&&t.indexOf(a.notRenderLabel,u)===-1&&(i=n.checkRequireFields(o,a.options.formSchema.validation),h+=a.renderLabel(o,i)),h+=l.call(a,o),"create"===a.options.mode&&o.options.copyvaluesfrom&&"list"!==u&&(s+=r.prototype.setupCopyValuesFrom.call(a,o)),o.options.visibleon&&"button"!==u&&"submit"!==u?(h='<div class="options-visible-on-'+o.name+'" style="display:none">'+h+"</div>",p.unshift({value:o,html:h})):s+=h,void(o&&o.name&&o.type&&(d[o.name]=e.trim(o.type.toLowerCase())))):""}),t.each(p,function(e){r.prototype.setupVisibleOn.call(a,e.value,e.html,null,d)}),s+=r.prototype.closeOpenDiv.call(this),e(this.el).html(this.template(t.extend({html:s},this.options.formSchema))),a._modelBinder.bind(a.model,a.el,a.model.bindings),o.Validation.bind(a,{forceUpdate:!0})}});return d});