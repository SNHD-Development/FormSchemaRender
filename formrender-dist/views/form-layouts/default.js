define(["jquery","lodash","backbone","vm","utils","events","modelbinder","validation","views/baseField","text!templates/form-layouts/default.html"],function(e,t,o,i,n,a,l,s,r,p){return r.extend({_modelBinder:void 0,template:t.template(p),initialize:function(){if(r.prototype.initialize.call(this),void 0===this.options.formSchema)throw"formSchema is not in the options parameters";this.el="#"+this.options.formSchema.name},render:function(){var i,a=this,l=r.prototype.render,s="",p=[],d={};t.each(this.options.formSchema.fields,function(o,m,c){var h="",u=o.type.toLowerCase();if(!r.prototype.checkShowOnMode.call(a,o,a.options.mode,a.options.formData.status))return"";a.options.internal&&void 0!==o.options.internalcanupdate&&!o.options.internalcanupdate?"image"===u&&(i=n.checkRequireFields(o,a.options.formSchema.validation),h+=a.renderLabel(o,i)):void 0!==o.description&&-1===t.indexOf(a.notRenderLabel,u)&&(i=n.checkRequireFields(o,a.options.formSchema.validation),h+=a.renderLabel(o,i)),h+=l.call(a,o),"create"===a.options.mode&&o.options.copyvaluesfrom&&"list"!==u&&(s+=r.prototype.setupCopyValuesFrom.call(a,o)),o.options.visibleon&&"button"!==u&&"submit"!==u?(h='<div class="options-visible-on-'+o.name+'" style="display:none">'+h+"</div>",p.unshift({value:o,html:h})):s+=h,o&&o.name&&o.type&&(d[o.name]=e.trim(o.type.toLowerCase()))}),t.each(p,function(e){r.prototype.setupVisibleOn.call(a,e.value,e.html,null,d)}),s+=r.prototype.closeOpenDiv.call(this),e(this.el).html(this.template(t.extend({html:s},this.options.formSchema))),a._modelBinder.bind(a.model,a.el,a.model.bindings),o.Validation.bind(a,{forceUpdate:!0})}})});