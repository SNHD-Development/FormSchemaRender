define(["jquery","underscore","backbone","text!templates/subform-layouts/buttondecision.html"],function(t,e,a,n){return a.View.extend({template:e.template(n),initialize:function(){},render:function(e){e=e||null;var a,n,i,s={};e&&(s.data=e),this.options.name&&(s.name=this.options.name),s._id=(s.name?s.name+"_":"")+"btn_data_selector",a=t("#"+s._id),a.length>0&&a.remove(),this.$el.after(this.template(s)),i=this.$el.next("#"+s._id),n=i.find("button.verified_data"),n.on("click",{$el:this.$el,data:s,buttons:n,table:i,html:n.html(),className:s._id},this.clickConfirm)},clickConfirm:function(a){a.preventDefault(),a.data.buttons.removeAttr("disabled"),a.data.table.find("tr").removeClass("success"),a.data.table.find(".btn-info").addClass("btn-success").removeClass("btn-info").html(a.data.html),a.data.$el.parent().find("."+a.data.className).remove();var n,i,s,d=t(a.currentTarget),l=d.parents("tr").addClass("success").find(':input[type="hidden"]');d.attr("disabled",!0).removeClass("btn-success").addClass("btn-info").html('<i class="icon icon-user"></i> Selected'),e.each(a.data.data.data.hiddenfields,function(e){n=t(':input[name="'+e+'"]'),i=l.filter('[name="'+e+"_data_options_"+d.attr("data-index")+'"]').val(),n.length>0?n.val(i).trigger("change"):(s='<input type="hidden" name="'+e+'" value="'+i+'" class="'+a.data.className+'"/>',a.data.$el.after(s))})}})});