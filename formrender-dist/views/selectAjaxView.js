define(["jquery","lodash","backbone","vm","events","text!templates/selectAjaxView.html"],function(e,t,n,r,i,s){var o=n.View.extend({template:t.template(s),initialize:function(){},events:{"click button.action-submit":"submitData"},render:function(e){if(!this.collection.length)return;var t=this.options.$form.parent().find("#"+this.id),n={collection:this.collection.toJSON(),title:this.options.title},r=this.options.$input,i=this.options.input_callback;t.length&&t.remove(),this.$el.html(this.template(n)).addClass("modal hide fade"),this.options.$form.after(this.el),t=this.options.$form.parent().find("#"+this.id),t.modal({backdrop:"static",keyboard:!1}),t.one("hidden",function(){r.one("change",i)})},submitData:function(t){t.preventDefault();var n=this.$el.find(".form-select input:checked"),r=this.options.$form.parent().find("#"+this.id),i=this;if(n.length){var s=[];n.each(function(t,n){s.push(i.collection.at(e(n).val()).toJSON())}),e("#subform_"+i.options.listName,i.options.$form).trigger("subform_"+i.options.listName+".ajaxUpdate",[s])}r.modal("hide")}});return o});