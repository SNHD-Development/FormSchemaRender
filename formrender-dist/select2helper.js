define(["jquery","underscore","jquery.select2"],function($,_){function cloneInputToHiddenInput(e){var t=["name","class","id","style","data-events"],n="";_.each(t,function(t){var r=e.attr(t);r&&(n+=t+'="'+r+'" ')}),n='<input type="hidden" '+n+" />",e.after(n);var r=e.css("width"),i=e.next();return e.remove(),r?i.css("width",r):i.css("width","98%"),i}function setupEvents($element,events){if(!_.isObject(events))throw"setupEvents() required events to be a valid object";_.each(events,function(value,key){var _func;_.isString(value)&&eval("_func = "+value+";");if(typeof _func!="function")throw"setupEvents() require events to be a valid function.";$element.on(key,function(e){_func($element,e)})})}function parseNumberList(e,t){if(t.added){var n=t.added.text;if(n.indexOf(" - ")>=0){var r=n.match(/(\d+) - (\d+)/ig);if(r){var i=r.shift();i=i.split(" - ");var s=parseInt(i.shift(),10),o=parseInt(i.shift(),10),u;if(_.isNaN(s)||_.isNaN(o))return;u=o-s;if(u<1){var a=o.toString().length,f=s.toString().slice(-a);u=o-f;if(u<1)return}if(u>1e3){alert("Cannot have the range greater than 1000. (from "+s+" to "+o+")");return}t.val=_.without(t.val,n);for(var l=0;l<=u;l++)t.val.push(s+l);e.select2("val",t.val)}}}}if(!$().select2)throw"Could not be abel to find select2";return{renderTags:function(e,t){t=t||null;var n=cloneInputToHiddenInput(e),r=n.attr("name");if(t._elementData[r]&&t._elementData[r].value){var i=JSON.stringify(t._elementData[r].value).replace(/\[|\]|\"/ig,"");n.val(i)}var s={tags:[]};n.select2(s),t._elementData[r]&&t._elementData[r].events&&setupEvents(n,t._elementData[r].events)}}});