/*!
 * jQuery Tools v1.2.7 - The missing UI library for the Web
 *
 * dateinput/dateinput.js
 *
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 *
 * http://flowplayer.org/tools/
 *
 */

(function(e,t){function u(e,t){return(new Date(e,t+1,0)).getDate()}function a(e,t){e=""+e,t=t||2;while(e.length<t)e="0"+e;return e}function l(e,t,n,i){var s=t.getDate(),u=t.getDay(),l=t.getMonth(),c=t.getFullYear(),h={d:s,dd:a(s),ddd:o[i].shortDays[u],dddd:o[i].days[u],m:l+1,mm:a(l+1),mmm:o[i].shortMonths[l],mmmm:o[i].months[l],yy:String(c).slice(2),yyyy:c},p=r[e](n,t,h,i);return f.html(p).html()}function c(e){return parseInt(e,10)}function h(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}function p(e){if(e!==t){if(e.constructor==Date)return e;if(typeof e=="string"){var n=e.split("-");if(n.length==3)return new Date(c(n[0]),c(n[1])-1,c(n[2]));if(!/^-?\d+$/.test(e))return;e=c(e)}var r=new Date;return r.setDate(r.getDate()+e),r}}function d(r,i){function U(t,n,i){A=t,N=t.getFullYear(),C=t.getMonth(),L=t.getDate(),i||(i=e.Event("api")),i.type=="click"&&!e.browser.msie&&r.focus(),i.type="beforeChange",B.trigger(i,[t]),i.isDefaultPrevented()||(r.val(l(n.formatter,t,n.format,n.lang)),i.type="change",B.trigger(i),r.data("date",t),a.hide(i))}function z(t){t.type="onShow",B.trigger(t),e(document).on("keydown.d",function(t){if(t.ctrlKey)return!0;var n=t.keyCode;if(n==8||n==46)return r.val(""),a.hide(t);if(n==27||n==9)return a.hide(t);if(e(s).index(n)>=0){if(!_)return a.show(t),t.preventDefault();var i=e("#"+v.weeks+" a"),o=e("."+v.focus),u=i.index(o);o.removeClass(v.focus);if(n==74||n==40)u+=7;else if(n==75||n==38)u-=7;else if(n==76||n==39)u+=1;else if(n==72||n==37)u-=1;return u>41?(a.addMonth(),o=e("#"+v.weeks+" a:eq("+(u-42)+")")):u<0?(a.addMonth(-1),o=e("#"+v.weeks+" a:eq("+(u+42)+")")):o=i.eq(u),o.addClass(v.focus),t.preventDefault()}return n==34?a.addMonth():n==33?a.addMonth(-1):n==36?a.today():(n==13&&(e(t.target).is("select")||e("."+v.focus).click()),e([16,17,18,9]).index(n)>=0)}),e(document).on("click.d",function(t){var n=t.target;!e(n).parents("#"+v.root).length&&n!=r[0]&&(!S||n!=S[0])&&a.hide(t)})}var a=this,f=new Date,d=f.getFullYear(),v=i.css,y=o[i.lang],w=e("#"+v.root),E=w.find("#"+v.title),S,x,T,N,C,L,A=r.attr("data-value")||i.value||r.val(),O=r.attr("min")||i.min,M=r.attr("max")||i.max,_,D;O===0&&(O="0"),A=p(A)||f,O=p(O||new Date(d+i.yearRange[0],1,1)),M=p(M||new Date(d+i.yearRange[1]+1,1,-1));if(!y)throw"Dateinput: invalid language: "+i.lang;if(r.attr("type")=="date"){var D=r.clone(),P=D.wrap("<div/>").parent().html(),H=e(P.replace(/type/i,"type=text data-orig-type"));i.value&&H.val(i.value),r.replaceWith(H),r=H}r.addClass(v.input);var B=r.add(a);if(!w.length){w=e("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",v.root),w.children().eq(0).attr("id",v.head).end().eq(1).attr("id",v.body).children().eq(0).attr("id",v.days).end().eq(1).attr("id",v.weeks).end().end().end().find("a").eq(0).attr("id",v.prev).end().eq(1).attr("id",v.next),E=w.find("#"+v.head).find("div").attr("id",v.title);if(i.selectors){var j=e("<select/>").attr("id",v.month),F=e("<select/>").attr("id",v.year);E.html(j.add(F))}var I=w.find("#"+v.days);for(var q=0;q<7;q++)I.append(e("<span/>").text(y.shortDays[(q+i.firstDay)%7]));e("body").append(w)}i.trigger&&(S=e("<a/>").attr("href","#").addClass(v.trigger).click(function(e){return i.toggle?a.toggle():a.show(),e.preventDefault()}).insertAfter(r));var R=w.find("#"+v.weeks);F=w.find("#"+v.year),j=w.find("#"+v.month),e.extend(a,{show:function(t){if(!(r.attr("readonly")||r.attr("disabled")||_)){t=t||e.Event(),t.type="onBeforeShow",B.trigger(t);if(t.isDefaultPrevented())return;e.each(n,function(){this.hide()}),_=!0,j.off("change").change(function(){a.setValue(c(F.val()),c(e(this).val()))}),F.off("change").change(function(){a.setValue(c(e(this).val()),c(j.val()))}),x=w.find("#"+v.prev).off("click").click(function(e){return x.hasClass(v.disabled)||a.addMonth(-1),!1}),T=w.find("#"+v.next).off("click").click(function(e){return T.hasClass(v.disabled)||a.addMonth(),!1}),a.setValue(A);var s=r.offset();return/iPad/i.test(navigator.userAgent)&&(s.top-=e(window).scrollTop()),w.css({top:s.top+r.outerHeight({margins:!0})+i.offset[0],left:s.left+i.offset[1]}),i.speed?w.show(i.speed,function(){z(t)}):(w.show(),z(t)),a}},setValue:function(n,r,s){var o=c(r)>=-1?new Date(c(n),c(r),c(s==t||isNaN(s)?1:s)):n||A;o<O?o=O:o>M&&(o=M),typeof n=="string"&&(o=p(n)),n=o.getFullYear(),r=o.getMonth(),s=o.getDate(),r==-1?(r=11,n--):r==12&&(r=0,n++);if(!_)return U(o,i),a;C=r,N=n,L=s;var l=new Date(n,r,1-i.firstDay),d=l.getDay(),g=u(n,r),w=u(n,r-1),S;if(i.selectors){j.empty(),e.each(y.months,function(t,r){O<new Date(n,t+1,1)&&M>new Date(n,t,0)&&j.append(e("<option/>").html(r).attr("value",t))}),F.empty();var k=f.getFullYear();for(var D=k+i.yearRange[0];D<k+i.yearRange[1];D++)O<new Date(D+1,0,1)&&M>new Date(D,0,0)&&F.append(e("<option/>").text(D));j.val(r),F.val(n)}else E.html(y.months[r]+" "+n);R.empty(),x.add(T).removeClass(v.disabled);for(var P=d?0:-7,H,B;P<(d?42:35);P++)H=e("<a/>"),P%7===0&&(S=e("<div/>").addClass(v.week),R.append(S)),P<d?(H.addClass(v.off),B=w-d+P+1,o=new Date(n,r-1,B)):P<d+g?(B=P-d+1,o=new Date(n,r,B),h(A,o)?H.attr("id",v.current).addClass(v.focus):h(f,o)&&H.attr("id",v.today)):(H.addClass(v.off),B=P-g-d+1,o=new Date(n,r+1,B)),O&&o<O&&H.add(x).addClass(v.disabled),M&&o>M&&H.add(T).addClass(v.disabled),H.attr("href","#"+B).text(B).data("date",o),S.append(H);return R.find("a").click(function(t){var n=e(this);return n.hasClass(v.disabled)||(e("#"+v.current).removeAttr("id"),n.attr("id",v.current),U(n.data("date"),i,t)),!1}),v.sunday&&R.find("."+v.week).each(function(){var t=i.firstDay?7-i.firstDay:0;e(this).children().slice(t,t+1).addClass(v.sunday)}),a},setMin:function(e,t){return O=p(e),t&&A<O&&a.setValue(O),a},setMax:function(e,t){return M=p(e),t&&A>M&&a.setValue(M),a},today:function(){return a.setValue(f)},addDay:function(e){return this.setValue(N,C,L+(e||1))},addMonth:function(e){var t=C+(e||1),n=u(N,t),r=L<=n?L:n;return this.setValue(N,t,r)},addYear:function(e){return this.setValue(N+(e||1),C,L)},destroy:function(){r.add(document).off("click.d keydown.d"),w.add(S).remove(),r.removeData("dateinput").removeClass(v.input),D&&r.replaceWith(D)},hide:function(t){if(_){t=e.Event(),t.type="onHide",B.trigger(t);if(t.isDefaultPrevented())return;e(document).off("click.d keydown.d"),w.hide(),_=!1}return a},toggle:function(){return a.isOpen()?a.hide():a.show()},getConf:function(){return i},getInput:function(){return r},getCalendar:function(){return w},getValue:function(e){return e?l(i.formatter,A,e,i.lang):A},isOpen:function(){return _}}),e.each(["onBeforeShow","onShow","change","onHide"],function(t,n){e.isFunction(i[n])&&e(a).on(n,i[n]),a[n]=function(t){return t&&e(a).on(n,t),a}}),i.editable||r.on("focus.d click.d",a.show).keydown(function(t){var n=t.keyCode;return _||e(s).index(n)<0?((n==8||n==46)&&r.val(""),t.shiftKey||t.ctrlKey||t.altKey||n==9?!0:t.preventDefault()):(a.show(t),t.preventDefault())}),p(r.val())&&U(A,i)}e.tools=e.tools||{version:"v1.2.7"};var n=[],r={},i,s=[75,76,38,39,74,72,40,37],o={};i=e.tools.dateinput={conf:{format:"mm/dd/yy",formatter:"default",selectors:!1,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:t,max:t,trigger:0,toggle:0,editable:0,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},addFormatter:function(e,t){r[e]=t},localize:function(t,n){e.each(n,function(e,t){n[e]=t.split(",")}),o[t]=n}},i.localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});var f=e("<a/>");i.addFormatter("default",function(e,t,n,r){return e.replace(/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,function(e){return e in n?n[e]:e})}),i.addFormatter("prefixed",function(e,t,n,r){return e.replace(/%(d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*')/g,function(e,t){return t in n?n[t]:e})}),e.expr[":"].date=function(t){var n=t.getAttribute("type");return n&&n=="date"||e(t).data("dateinput")},e.fn.dateinput=function(t){if(this.data("dateinput"))return this;t=e.extend(!0,{},i.conf,t),e.each(t.css,function(e,n){!n&&e!="prefix"&&(t.css[e]=(t.css.prefix||"")+(n||e))});var r;return this.each(function(){var i=new d(e(this),t);n.push(i);var s=i.getInput().data("dateinput",i);r=r?r.add(s):s}),r?r:this}})(jQuery);