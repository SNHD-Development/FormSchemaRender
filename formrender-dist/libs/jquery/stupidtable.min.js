(function(e){e.fn.stupidtable=function(t){return this.each(function(){var n=e(this);t=t||{},t=e.extend({},e.fn.stupidtable.default_sort_fns,t),n.on("click.stupidtable","th",function(){var r=e(this),i=0,s=e.fn.stupidtable.dir;n.find("th").slice(0,r.index()).each(function(){var t=e(this).attr("colspan")||1;i+=parseInt(t,10)});var o=r.data("sort-default")||s.ASC;r.data("sort-dir")&&(o=r.data("sort-dir")===s.ASC?s.DESC:s.ASC);var u=r.data("sort")||null;null!==u&&(n.trigger("beforetablesort",{column:i,direction:o}),n.css("display"),setTimeout(function(){var h=[],p=t[u],v=n.children("tbody").children("tr");v.each(function(t,n){var r=e(n).children().eq(i),s=r.data("sort-value"),r="undefined"!=typeof s?s:r.text();h.push([r,n])}),h.sort(function(e,t){return p(e[0],t[0])}),o!=s.ASC&&h.reverse(),v=e.map(h,function(e){return e[1]}),n.children("tbody").append(v),n.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc"),r.data("sort-dir",o).addClass("sorting-"+o),n.trigger("aftertablesort",{column:i,direction:o}),n.css("display")},10))})})},e.fn.stupidtable.dir={ASC:"asc",DESC:"desc"},e.fn.stupidtable.default_sort_fns={"int":function(e,t){return parseInt(e,10)-parseInt(t,10)},"float":function(e,t){return parseFloat(e)-parseFloat(t)},string:function(e,t){return e<t?-1:e>t?1:0},"string-ins":function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e<t?-1:e>t?1:0}}})(jQuery);