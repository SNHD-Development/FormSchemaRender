/**
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 * http://spin.js.org/
 *
 * Example:
    var opts = {
      lines: 12             // The number of lines to draw
    , length: 7             // The length of each line
    , width: 5              // The line thickness
    , radius: 10            // The radius of the inner circle
    , scale: 1.0            // Scales overall size of the spinner
    , corners: 1            // Roundness (0..1)
    , color: '#000'         // #rgb or #rrggbb
    , opacity: 1/4          // Opacity of the lines
    , rotate: 0             // Rotation offset
    , direction: 1          // 1: clockwise, -1: counterclockwise
    , speed: 1              // Rounds per second
    , trail: 100            // Afterglow percentage
    , fps: 20               // Frames per second when using setTimeout()
    , zIndex: 2e9           // Use a high z-index by default
    , className: 'spinner'  // CSS class to assign to the element
    , top: '50%'            // center vertically
    , left: '50%'           // center horizontally
    , shadow: false         // Whether to render a shadow
    , hwaccel: false        // Whether to use hardware acceleration (might be buggy)
    , position: 'absolute'  // Element positioning
    }
    var target = document.getElementById('foo')
    var spinner = new Spinner(opts).spin(target)
 */

(function(e,t){e.Spinner||(e.Spinner=t());return})(this,function(){"use strict";function i(e,t){var n=document.createElement(e||"div"),r;for(r in t)n[r]=t[r];return n}function s(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,i,s,o){var u=["opacity",i,~~(e*100),s,o].join("-"),a=.01+s/o*100,f=Math.max(1-(1-e)/i*(100-a),e),l=n.substring(0,n.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return t[u]||(r.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+i)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",r.cssRules.length),t[u]=1),u}function u(t,n){var r=t.style,i,s;n=n.charAt(0).toUpperCase()+n.slice(1);if(r[n]!==undefined)return n;for(s=0;s<e.length;s++){i=e[s]+n;if(r[i]!==undefined)return i}}function a(e,t){for(var n in t)e.style[u(e,n)||n]=t[n];return e}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]===undefined&&(e[r]=n[r])}return e}function l(e,t){return typeof e=="string"?e:e[t%e.length]}function h(e){this.opts=f(e||{},h.defaults,c)}function p(){function e(e,t){return i("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}r.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:i+" "+i,coordorigin:-r+" "+ -r}),{width:i,height:i})}function h(t,i,u){s(f,s(a(o(),{rotation:360/n.lines*t+"deg",left:~~i}),s(a(e("roundrect",{arcsize:n.corners}),{width:r,height:n.scale*n.width,left:n.scale*n.radius,top:-n.scale*n.width>>1,filter:u}),e("fill",{color:l(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.scale*(n.length+n.width),i=n.scale*2*r,u=-(n.width+n.length)*n.scale*2+"px",f=a(o(),{position:"absolute",top:u,left:u}),c;if(n.shadow)for(c=1;c<=n.lines;c++)h(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=n.lines;c++)h(c);return s(t,f)},h.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var e=["webkit","Moz","ms","O"],t={},n,r,c={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};h.defaults={},f(h.prototype,{spin:function(e){this.stop();var t=this,r=t.opts,s=t.el=i(null,{className:r.className});a(s,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top}),e&&e.insertBefore(s,e.firstChild||null),s.setAttribute("role","progressbar"),t.lines(s,t.opts);if(!n){var o=0,u=(r.lines-1)*(1-r.direction)/2,f,l=r.fps,c=l/r.speed,h=(1-r.opacity)/(c*r.trail/100),p=c/r.lines;(function d(){o++;for(var e=0;e<r.lines;e++)f=Math.max(1-(o+(r.lines-e)*p)%c*h,r.opacity),t.opacity(s,e*r.direction+u,f,r);t.timeout=t.el&&setTimeout(d,~~(1e3/l))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function c(e,n){return a(i(),{position:"absolute",width:t.scale*(t.length+t.width)+"px",height:t.scale*t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*r+t.rotate)+"deg) translate("+t.scale*t.radius+"px"+",0)",borderRadius:(t.corners*t.scale*t.width>>1)+"px"})}var r=0,u=(t.lines-1)*(1-t.direction)/2,f;for(;r<t.lines;r++)f=a(i(),{position:"absolute",top:1+~(t.scale*t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&o(t.opacity,t.trail,u+r*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&s(f,a(c("#000","0 0 4px #000"),{top:"2px"})),s(e,s(f,c(l(t.color,r),"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});if(typeof document!="undefined"){r=function(){var e=i("style",{type:"text/css"});return s(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}();var d=a(i("group"),{behavior:"url(#default#VML)"});!u(d,"transform")&&d.adj?p():n=u(d,"animation")}return h});