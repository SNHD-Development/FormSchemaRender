define(["jquery","underscore","backbone","events"],function(e,t,n,r){var i={},s=function(e,t){t=t||!1,typeof i[e]!="undefined"&&(i[e].undelegateEvents(),typeof i[e].clean=="function"&&i[e].clean(),t&&typeof i[e].removeContent=="function"&&i[e].removeContent())},o=function(e,t,n,o){s(t);var u=new n(o);return i[t]=u,typeof e.children=="undefined"?(e.children={},e.children[t]=u):e.children[t]=u,r.trigger("viewCreated"),u},u=function(e,t){var n=Object.keys(e),r=n.length;while(r--){var i=n[r],s=i.toLowerCase();i!==s&&(e[s]=e[i],delete e[i]);if(typeof e[s]=="object"){if(s==="validation")continue;if(typeof t!="undefined"&&s===t)continue;this.toLower(e[s])}}};return{create:o,remove:s,toLower:u}});